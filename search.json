[
  {
    "objectID": "slides-data/index.html#the-obligatory-intro-slide",
    "href": "slides-data/index.html#the-obligatory-intro-slide",
    "title": "Le format de donn√©es Parquet",
    "section": "‚ÄúThe obligatory intro slide‚Äù",
    "text": "‚ÄúThe obligatory intro slide‚Äù\n\n\n\nSource : motherduck.com"
  },
  {
    "objectID": "slides-data/index.html#enjeux",
    "href": "slides-data/index.html#enjeux",
    "title": "Le format de donn√©es Parquet",
    "section": "Enjeux",
    "text": "Enjeux\n\nTendance √† la massification des donn√©es\n\nRelatif aux capacit√©s de stockage et de traitement\n\n\n\n\n\n\nSource : AI with Python"
  },
  {
    "objectID": "slides-data/index.html#pour-traiter-la-volum√©trie",
    "href": "slides-data/index.html#pour-traiter-la-volum√©trie",
    "title": "Le format de donn√©es Parquet",
    "section": "Pour traiter la volum√©trie",
    "text": "Pour traiter la volum√©trie\n\nUtiliser un format de donn√©es adapt√© (Parquet)\n\n\n\nUtiliser des outils informatiques adapt√©s\n\nSuffisant la plupart du temps : calcul larger than memory optimis√© (Arrow / DuckDB)\nSi volum√©trie massive : calcul distribu√© (Spark)\n\n\n\n\n\nUtiliser une infra de stockage adapt√©e (S3)\n\n\n\n\n\n\n\n\n\nNote\n\n\nNous allons voir comment ces trois points sont compl√©mentaires."
  },
  {
    "objectID": "slides-data/index.html#big-data-is-dead",
    "href": "slides-data/index.html#big-data-is-dead",
    "title": "Le format de donn√©es Parquet",
    "section": "‚ÄúBig Data is dead‚Äù ?",
    "text": "‚ÄúBig Data is dead‚Äù ?\n\nJordan Tigani : Big Data is dead\n\n‚ÄúThe big data frontier keeps receding‚Äù\n‚ÄúMost people don‚Äôt have that much data‚Äù\n‚ÄúMost data is rarely queried‚Äù\n\n\n\n\nPlaidoyer pour une parcimonie‚Ä¶\n\n‚Ä¶ qui facilite la mise en production !"
  },
  {
    "objectID": "slides-data/index.html#enjeux-1",
    "href": "slides-data/index.html#enjeux-1",
    "title": "Le format de donn√©es Parquet",
    "section": "Enjeux",
    "text": "Enjeux\n\nLe choix d‚Äôun format de donn√©es r√©pond √† un arbitrage entre plusieurs crit√®res :\n\nPublic cible\nFinalit√© (traitement, analyse, diffusion)\nVolum√©trie\nInterop√©rabilit√©"
  },
  {
    "objectID": "slides-data/index.html#formats-traditionnels",
    "href": "slides-data/index.html#formats-traditionnels",
    "title": "Le format de donn√©es Parquet",
    "section": "Formats traditionnels",
    "text": "Formats traditionnels\n\nFormats de donn√©es adh√©rents √† un langage (sas7bdat, RDS, fst, etc.)\n\nNon-interop√©rables -&gt; √† √©viter !\n\n\n\n\nLe format CSV\n\nInterop√©rable et simple d‚Äôutilisation\nPas de gestion des m√©ta-donn√©es\nPeu adapt√© aux donn√©es volumineuses"
  },
  {
    "objectID": "slides-data/index.html#limites-du-csv",
    "href": "slides-data/index.html#limites-du-csv",
    "title": "Le format de donn√©es Parquet",
    "section": "Limites du CSV",
    "text": "Limites du CSV\n\n\n\nDes performances limit√©es\n\nStockage : non-compress√© -&gt; espace disque √©lev√©\nLecture : ‚Äúorient√©-ligne‚Äù -&gt; performances faibles\n\n\n\n\n\n\n\n\n\nPas de typage des donn√©es √† l‚Äô√©criture du fichier\n\nDemande expertise et pr√©caution √† la lecture\nExemple: 01004 pour le code commune d‚ÄôAmb√©rieu-en-Bugey"
  },
  {
    "objectID": "slides-data/index.html#un-format-l√©ger",
    "href": "slides-data/index.html#un-format-l√©ger",
    "title": "Le format de donn√©es Parquet",
    "section": "Un format l√©ger ",
    "text": "Un format l√©ger \n\nStockage :\n\nCompression : entre 5 et 20 fois plus l√©ger qu‚Äôun CSV\n\n\n\n\n\n\n\n\n\n\nExemple: Recensement de la Population\n\n\n\nFicher d√©tail : 20 millions de lignes, 92 variables\n\nCSV: &gt; 4Go\nParquet: &lt; 500Mo"
  },
  {
    "objectID": "slides-data/index.html#un-format-efficace",
    "href": "slides-data/index.html#un-format-efficace",
    "title": "Le format de donn√©es Parquet",
    "section": "Un format efficace",
    "text": "Un format efficace\n\nLecture :\n\nJusqu‚Äô√† 34x plus rapide qu‚Äôun CSV\n\n\n\n\n‚ÄúOrient√© colonne‚Äù\n\nOptimis√© pour les traitements analytiques\nLimite la quantit√© de donn√©es √† mettre en m√©moire\nCon√ßu pour √™tre √©crit une fois mais lu fr√©quemment"
  },
  {
    "objectID": "slides-data/index.html#pour-optimiser-la-lecture",
    "href": "slides-data/index.html#pour-optimiser-la-lecture",
    "title": "Le format de donn√©es Parquet",
    "section": "Pour optimiser la lecture",
    "text": "Pour optimiser la lecture\n\nPartitionner ou ordonner les donn√©es\n\n\n\n\n\n\n\n\n\n\n\n\n\nL‚Äôart de bien partitionner\n\n\n\nPartitionner par une/des variable(s) d‚Äôint√©r√™t si gros fichier\n\nEviter de cr√©er de nombreux petits (&lt; 128Mo) fichiers\n\nSinon ordonner les donn√©es avant d‚Äô√©crire le fichier (cf.¬†Eric Mauvi√®re)"
  },
  {
    "objectID": "slides-data/index.html#un-format-universel-et-fiable",
    "href": "slides-data/index.html#un-format-universel-et-fiable",
    "title": "Le format de donn√©es Parquet",
    "section": "Un format universel et fiable",
    "text": "Un format universel et fiable\n\nGestion native des m√©ta-donn√©es\n\nD√©finition automatique d‚Äôun sch√©ma (noms, types)\nMise √† disposition plus robuste\n\n\n\n\nInterop√©rable\n\n\n\n\nOpen-source\n\n\n\n\nNon lisible par un humain mais de plus en plus de visualiseurs en ligne\n\nPar exemple sur le SSPCloud"
  },
  {
    "objectID": "slides-data/index.html#parquet-quels-avantages",
    "href": "slides-data/index.html#parquet-quels-avantages",
    "title": "Le format de donn√©es Parquet",
    "section": "Parquet: quels avantages ?",
    "text": "Parquet: quels avantages ?\n\nFormat libre, open source et ind√©pendant du langage ;\n\nLes formats propri√©taires imposent des outils aux consommateurs !\n\nPlus de confort pour les utilisateurs:\n\nDes requ√™tes plus rapides et efficaces: seulement les donn√©es n√©cessaires sont lues\nDes donn√©es conformes √† la mise √† disposition par le producteur"
  },
  {
    "objectID": "slides-data/index.html#parquet-quels-usages",
    "href": "slides-data/index.html#parquet-quels-usages",
    "title": "Le format de donn√©es Parquet",
    "section": "Parquet: quels usages ?",
    "text": "Parquet: quels usages ?\n\nFormat privil√©gi√© pour la mise √† disposition de donn√©es internes √† l‚ÄôInsee:\n\nMoins d‚Äôasym√©tries entre utilisateurs et producteurs.\n\n\n\n\n\n\n\n\n\nPremi√®res diffusions √† l‚Äôexterne\n\n\n\nBureaux de votes du r√©pertoire √©lectoral unique (REU):\nRecensement de la population (RP)\nBase permanente des √©quipements (BPE)"
  },
  {
    "objectID": "slides-data/index.html#parquet-quels-usages-1",
    "href": "slides-data/index.html#parquet-quels-usages-1",
    "title": "Le format de donn√©es Parquet",
    "section": "Parquet: quels usages ?",
    "text": "Parquet: quels usages ?\n\n\n\n\n\n\nExemples de cartes pouvant √™tre produites simplement avec les donn√©es du recensement diffus√©es par l‚ÄôInsee"
  },
  {
    "objectID": "slides-data/index.html#enjeu",
    "href": "slides-data/index.html#enjeu",
    "title": "Le format de donn√©es Parquet",
    "section": "Enjeu",
    "text": "Enjeu\n\nParquet ne r√©sout pas tout\n\nL‚Äôespace disque est optimis√©\nLes donn√©es d√©compress√©es doivent passer en RAM\n\n\n\n\nLe framework adapt√© d√©pend de la volum√©trie\n\nPour la plupart des besoins : Arrow et DuckDB"
  },
  {
    "objectID": "slides-data/index.html#les-frameworks",
    "href": "slides-data/index.html#les-frameworks",
    "title": "Le format de donn√©es Parquet",
    "section": "Les frameworks",
    "text": "Les frameworks\n\nDeux frameworks de r√©f√©rence : Arrow et DuckDB\n\nOrientation fichier (Arrow) VS orientation BDD (DuckDB)\n\n\n\n\nTraitement en-m√©moire optimis√©\n\nOrient√©s-colonne\nLazy evaluation (prochaine slide)\n\n\n\n\n\nTr√®s bonne int√©gration:\n\nAvec le tidyverse ()\nAvec le syst√®me de stockage S3"
  },
  {
    "objectID": "slides-data/index.html#les-frameworks-1",
    "href": "slides-data/index.html#les-frameworks-1",
    "title": "Le format de donn√©es Parquet",
    "section": "Les frameworks",
    "text": "Les frameworks"
  },
  {
    "objectID": "slides-data/index.html#la-lazy-evaluation",
    "href": "slides-data/index.html#la-lazy-evaluation",
    "title": "Le format de donn√©es Parquet",
    "section": "La lazy evaluation",
    "text": "La lazy evaluation\n\nLes frameworks comme Arrow ou DuckDB n‚Äôex√©cutent pas imm√©diatement les op√©rations\n\n\n\nLes instructions sont optimis√©es avant ex√©cution\n\nVous √©crivez un plan d‚Äôex√©cution, r√©interpr√©t√©\n\n\n\n\n\nAvantages :\n\nMoins de donn√©es manipul√©es inutilement\nMoins de RAM consomm√©e\nEx√©cution plus rapide car optimis√©e"
  },
  {
    "objectID": "slides-data/index.html#la-lazy-evaluation-1",
    "href": "slides-data/index.html#la-lazy-evaluation-1",
    "title": "Le format de donn√©es Parquet",
    "section": "La lazy evaluation",
    "text": "La lazy evaluation\n\n\n\n\n\n\n\nExemple d‚Äôune requ√™te lazy\n\n\nEn supposant qu‚Äôachille est un objet Arrow ou DuckDB:\nn_logements_depcom &lt;- achille |&gt;\n1  filter(dep %in% c(\"01\", \"02\", \"03\")) |&gt;\n2  select(idlogement, depcom) |&gt;\n  group_by(depcom) |&gt;\n  summarise(n_logements = n()) |&gt;\n3  collect()\n\n1\n\nR√©cup√®re seulement les donn√©es n√©cessaires\n\n2\n\nR√©cup√®re seulement les variables n√©cessaires\n\n3\n\nLes calculs ne sont effectu√©s qu‚Äô√† cette √©tape !"
  },
  {
    "objectID": "slides-data/index.html#la-lazy-evaluation-2",
    "href": "slides-data/index.html#la-lazy-evaluation-2",
    "title": "Le format de donn√©es Parquet",
    "section": "La lazy evaluation",
    "text": "La lazy evaluation\n\nVoici le d√©but du plan:\n\n\n‚ùìÔ∏è Pourrait-il √™tre optimis√© ?"
  },
  {
    "objectID": "slides-data/index.html#la-lazy-evaluation-3",
    "href": "slides-data/index.html#la-lazy-evaluation-3",
    "title": "Le format de donn√©es Parquet",
    "section": "La lazy evaluation",
    "text": "La lazy evaluation\n\nVoici le plan plus optimal:\n\nPredicate pushdown"
  },
  {
    "objectID": "slides-data/index.html#parquet-gagne-sur-tous-les-tableaux",
    "href": "slides-data/index.html#parquet-gagne-sur-tous-les-tableaux",
    "title": "Le format de donn√©es Parquet",
    "section": "Parquet gagne sur tous les tableaux",
    "text": "Parquet gagne sur tous les tableaux\n\n\n\nBenchmarks faits pour la formation aux bonnes pratiques de l‚ÄôInsee"
  },
  {
    "objectID": "slides-data/index.html#ressources-compl√©mentaires",
    "href": "slides-data/index.html#ressources-compl√©mentaires",
    "title": "Le format de donn√©es Parquet",
    "section": "Ressources compl√©mentaires",
    "text": "Ressources compl√©mentaires\n\nLes posts d‚ÄôEric Mauvi√®re sur icem7.fr/\n\n\n\nWebinaire du CASD sur Parquet et DuckDB\n\n\n\n\nLa formation aux bonnes pratiques de l‚ÄôInsee\n\n\n\n\nUn atelier de l‚ÄôEHESS sur Parquet avec de nombreux exemples ici\n\n\n\n\nLe cours de mise en production de l‚ÄôENSAE"
  },
  {
    "objectID": "slides-data/index.html#applications",
    "href": "slides-data/index.html#applications",
    "title": "Le format de donn√©es Parquet",
    "section": "Applications",
    "text": "Applications"
  },
  {
    "objectID": "slides-data/index.html#ce-nest-pas-fini",
    "href": "slides-data/index.html#ce-nest-pas-fini",
    "title": "Le format de donn√©es Parquet",
    "section": "Ce n‚Äôest pas fini !",
    "text": "Ce n‚Äôest pas fini !"
  },
  {
    "objectID": "slides-data/index.html#nouvelles-opportunit√©s-avec-cet-√©cosyst√®me",
    "href": "slides-data/index.html#nouvelles-opportunit√©s-avec-cet-√©cosyst√®me",
    "title": "Le format de donn√©es Parquet",
    "section": "Nouvelles opportunit√©s avec cet √©cosyst√®me",
    "text": "Nouvelles opportunit√©s avec cet √©cosyst√®me\n\nInt√©gration native avec S3\n\nPour travailler sur des serveurs √† l‚Äô√©tat de l‚Äôart‚Ä¶\nPlut√¥t que sur des ordinateurs aux ressources limit√©es\n\n\n\n\nDuckDB WASM pour faire du DuckDB dans le navigateur :\n\nPour des dataviz r√©actives‚Ä¶ dans des sites statiques !\nBye bye les gal√®res de d√©ploiement de Shiny, Streamlit‚Ä¶"
  },
  {
    "objectID": "slides-data/index.html#les-extensions-spatiales",
    "href": "slides-data/index.html#les-extensions-spatiales",
    "title": "Le format de donn√©es Parquet",
    "section": "Les extensions spatiales",
    "text": "Les extensions spatiales\n\nPossibilit√© de lire/√©crire des objets g√©ographiques dans Parquet\n\nCompatible avec les standards GeoParquet\nExtension SPATIAL\n\n\n\n\nPermet des traitements g√©ographiques efficaces :\n\nJointures spatiales, calculs de distance‚Ä¶\nR√©cup√®re le r√©sultat sous sf"
  },
  {
    "objectID": "slides-data/index.html#travailler-avec-s3",
    "href": "slides-data/index.html#travailler-avec-s3",
    "title": "Le format de donn√©es Parquet",
    "section": "Travailler avec S3",
    "text": "Travailler avec S3\n\nBeaucoup plus simple qu‚Äôun data warehouse et des VM postgre\n\n\n\nOn peut lire la donn√©e sur S3 presque comme si elle √©tait en local\n\nFROM 's3://bucket_name/filename.extension';\nSELECT *\nWHERE DEPT=='36'"
  },
  {
    "objectID": "slides-data/index.html#duckdb-dans-le-navigateur",
    "href": "slides-data/index.html#duckdb-dans-le-navigateur",
    "title": "Le format de donn√©es Parquet",
    "section": "DuckDB dans le navigateur",
    "text": "DuckDB dans le navigateur\n\nGr√¢ce √† DuckDB-WASM, on peut ex√©cuter du SQL dans le navigateur üéØ\n\nEmbarqu√© par d√©faut sur Observablehq et Quarto\n\n\n\n\nId√©al pour des applications interactives :\n\nVisualisations r√©actives sur des sites statiques\n‚ö° Pas besoin de serveur  ou , tout est c√¥t√© client !"
  },
  {
    "objectID": "slides-data/index.html#exemple",
    "href": "slides-data/index.html#exemple",
    "title": "Le format de donn√©es Parquet",
    "section": "Exemple",
    "text": "Exemple\n\ncontainer\n\n\n\n\n\n\n\nimport {container, } from \"@linogaliana/atelier-parquet-ssphub\""
  }
]