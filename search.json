[
  {
    "objectID": "slides-data/index.html#the-obligatory-intro-slide",
    "href": "slides-data/index.html#the-obligatory-intro-slide",
    "title": "Le format de donnÃ©es Parquet",
    "section": "â€œThe obligatory intro slideâ€",
    "text": "â€œThe obligatory intro slideâ€\n\n\n\nSource : motherduck.com"
  },
  {
    "objectID": "slides-data/index.html#enjeux",
    "href": "slides-data/index.html#enjeux",
    "title": "Le format de donnÃ©es Parquet",
    "section": "Enjeux",
    "text": "Enjeux\n\nTendance Ã  la massification des donnÃ©es\n\nRelatif aux capacitÃ©s de stockage et de traitement\n\n\n\n\n\n\nSource : AI with Python"
  },
  {
    "objectID": "slides-data/index.html#pour-traiter-la-volumÃ©trie",
    "href": "slides-data/index.html#pour-traiter-la-volumÃ©trie",
    "title": "Le format de donnÃ©es Parquet",
    "section": "Pour traiter la volumÃ©trie",
    "text": "Pour traiter la volumÃ©trie\n\nUtiliser une infra de stockage adaptÃ©e (S3)\nUtiliser un format de donnÃ©es adaptÃ© (Parquet)\nUtiliser des outils informatiques adaptÃ©s\n\nSuffisant la plupart du temps : calcul larger than memory optimisÃ© (Arrow / DuckDB)\nSi volumÃ©trie massive : calcul distribuÃ© (Spark)"
  },
  {
    "objectID": "slides-data/index.html#big-data-is-dead",
    "href": "slides-data/index.html#big-data-is-dead",
    "title": "Le format de donnÃ©es Parquet",
    "section": "â€œBig Data is deadâ€ ?",
    "text": "â€œBig Data is deadâ€ ?\n\nJordan Tigani : Big Data is dead\n\nâ€œThe big data frontier keeps recedingâ€\nâ€œMost people donâ€™t have that much dataâ€\nâ€œMost data is rarely queriedâ€\n\nPlaidoyer pour une parcimonieâ€¦\n\nâ€¦ qui facilite la mise en production !"
  },
  {
    "objectID": "slides-data/index.html#enjeux-1",
    "href": "slides-data/index.html#enjeux-1",
    "title": "Le format de donnÃ©es Parquet",
    "section": "Enjeux",
    "text": "Enjeux\n\nLe choix dâ€™un format de donnÃ©es rÃ©pond Ã  un arbitrage entre plusieurs critÃ¨res :\n\nPublic cible\nFinalitÃ© (traitement, analyse, diffusion)\nVolumÃ©trie\nInteropÃ©rabilitÃ©"
  },
  {
    "objectID": "slides-data/index.html#formats-traditionnels",
    "href": "slides-data/index.html#formats-traditionnels",
    "title": "Le format de donnÃ©es Parquet",
    "section": "Formats traditionnels",
    "text": "Formats traditionnels\n\nFormats de donnÃ©es adhÃ©rents Ã  un langage (sas7bdat, RDS, fst, etc.)\n\nNon-interopÃ©rables -&gt; Ã  Ã©viter !\n\nLe format CSV\n\nInteropÃ©rable et simple dâ€™utilisation\nPas de gestion des mÃ©ta-donnÃ©es\nPeu adaptÃ© aux donnÃ©es volumineuses"
  },
  {
    "objectID": "slides-data/index.html#limites-du-csv",
    "href": "slides-data/index.html#limites-du-csv",
    "title": "Le format de donnÃ©es Parquet",
    "section": "Limites du CSV",
    "text": "Limites du CSV\n\n\n\nDes performances limitÃ©es\n\nStockage : non-compressÃ© -&gt; espace disque Ã©levÃ©\nLecture : â€œorientÃ©-ligneâ€ -&gt; performances faibles\n\n\n\n\n\n\n\n\n\nPas de typage des donnÃ©es Ã  lâ€™Ã©criture du fichier\n\nDemande expertise et prÃ©caution Ã  la lecture\nExemple: 01004 pour le code commune dâ€™AmbÃ©rieu-en-Bugey"
  },
  {
    "objectID": "slides-data/index.html#un-format-lÃ©ger",
    "href": "slides-data/index.html#un-format-lÃ©ger",
    "title": "Le format de donnÃ©es Parquet",
    "section": "Un format lÃ©ger ",
    "text": "Un format lÃ©ger \n\nStockage :\n\nCompression : entre 5 et 20 fois plus lÃ©ger quâ€™un CSV\n\n\n\n\n\n\n\n\n\n\nExemple: Recensement de la Population\n\n\n\nFicher dÃ©tail : 20 millions de lignes, 92 variables\n\nCSV: &gt; 4Go\nParquet: &lt; 500Mo"
  },
  {
    "objectID": "slides-data/index.html#le-format-parquet",
    "href": "slides-data/index.html#le-format-parquet",
    "title": "Le format de donnÃ©es Parquet",
    "section": "Le format Parquet",
    "text": "Le format Parquet\n\nLecture :\n\nJusquâ€™Ã  34x plus rapide quâ€™un CSV\n\nâ€œOrientÃ© colonneâ€\n\nOptimisÃ© pour les traitements analytiques\nLimite la quantitÃ© de donnÃ©es Ã  mettre en mÃ©moire"
  },
  {
    "objectID": "slides-data/index.html#le-format-parquet-1",
    "href": "slides-data/index.html#le-format-parquet-1",
    "title": "Le format de donnÃ©es Parquet",
    "section": "Le format Parquet",
    "text": "Le format Parquet\n\nPartitionner les donnÃ©es pour optimiser la lecture\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nLâ€™art de bien partitionner\n\n\n\nPartitionner par une/des variable(s) dâ€™intÃ©rÃªt\nEviter de crÃ©er de nombreux petits (&lt; 128Mo) fichiers"
  },
  {
    "objectID": "slides-data/index.html#le-format-parquet-2",
    "href": "slides-data/index.html#le-format-parquet-2",
    "title": "Le format de donnÃ©es Parquet",
    "section": "Le format Parquet",
    "text": "Le format Parquet\n\nGestion native des mÃ©ta-donnÃ©es\n\nDÃ©finition automatique dâ€™un schÃ©ma (noms, types)\nMise Ã  disposition plus robuste\n\nInteropÃ©rable\nOpen-source"
  },
  {
    "objectID": "slides-data/index.html#le-format-parquet-3",
    "href": "slides-data/index.html#le-format-parquet-3",
    "title": "Le format de donnÃ©es Parquet",
    "section": "Le format Parquet",
    "text": "Le format Parquet\n\nDeux frameworks de rÃ©fÃ©rence : Arrow et DuckDB\n\nOrientation fichier (Arrow) VS orientation BDD (DuckDB)\nTrÃ¨s bonne intÃ©gration avec le tidyverse\n\nTraitement en-mÃ©moire optimisÃ©\n\nOrientÃ©s-colonne\nLazy evaluation\n\n\n\n\n\n\n\n\n\n\nExemple dâ€™une requÃªte lazy\n\n\nn_logements_depcom &lt;- achille |&gt;\n  filter(dep %in% c(\"01\", \"02\", \"03\")) |&gt;  # RÃ©cupÃ¨re seulement les donnÃ©es nÃ©cessaires\n  select(idlogement, depcom) |&gt;  # RÃ©cupÃ¨re seulement les colonnes nÃ©cessaires\n  group_by(depcom) |&gt;\n  summarise(n_logements = n()) |&gt;\n  collect()  # Les calculs ne sont effectuÃ©s qu'Ã  cette Ã©tape !"
  },
  {
    "objectID": "slides-data/index.html#le-format-parquet-4",
    "href": "slides-data/index.html#le-format-parquet-4",
    "title": "Le format de donnÃ©es Parquet",
    "section": "Le format Parquet",
    "text": "Le format Parquet\n\nParquet gagne sur tous les tableaux"
  },
  {
    "objectID": "slides-data/api.html#quest-ce-quune-api",
    "href": "slides-data/api.html#quest-ce-quune-api",
    "title": "Les API",
    "section": "Quâ€™est-ce quâ€™une API ?",
    "text": "Quâ€™est-ce quâ€™une API ?\n\n::: {style=â€œfont-size: 70\n\nUne APplication programming interface ou Â« interface de programmation dâ€™application Â») est une interface logicielle qui permet de Â« connecter Â» un logiciel ou un service Ã  un autre logiciel ou service afin dâ€™Ã©changer des donnÃ©es et des fonctionnalitÃ©s.\nCNIL\n\n:::\n\nDÃ©finition peu informative:\n\nPython, scikit-learn, Docker, etc. sont des APIs\nEn pratique, on signifie gÃ©nÃ©ralement une API REST"
  },
  {
    "objectID": "slides-data/api.html#les-apis-rest",
    "href": "slides-data/api.html#les-apis-rest",
    "title": "Les API",
    "section": "Les APIs REST",
    "text": "Les APIs REST\n\n\nAPI RESTful : API conforme au style dâ€™architecture REST\n\nCommunication via le protocole HTTP\n\n\n\n\nEn pratique :\n\nOn accÃ¨de Ã  un endpoint (ex : lâ€™API de la BAN)\nAvec des requÃªtes HTTP (GET, POST, etc.) (ex : rues contenant â€œcomÃ©dieâ€)"
  },
  {
    "objectID": "slides-data/api.html#analogie-avec-un-restaurant",
    "href": "slides-data/api.html#analogie-avec-un-restaurant",
    "title": "Les API",
    "section": "Analogie avec un restaurant",
    "text": "Analogie avec un restaurant\n\n\nğŸ’¬ Vous passez commande\n\nRequÃªte avec paramÃ¨tres depuis , , votre navigateurâ€¦\n\n\n\n\nâ†”ï¸ï¸ Le serveur transmet la commande en cuisine:\n\nPoint dâ€™entrÃ©e de lâ€™API\n\n\n\n\n\nğŸ§‘â€ğŸ³ La cuisine prÃ©pare le plat\n\nLe serveur (informatique) fait les traitements ad hoc\n\n\n\n\n\nğŸ• Vous recevez votre plat\n\nVous recevez une rÃ©ponse au format JSON"
  },
  {
    "objectID": "slides-data/api.html#pourquoi-les-api",
    "href": "slides-data/api.html#pourquoi-les-api",
    "title": "Les API",
    "section": "Pourquoi les API ?",
    "text": "Pourquoi les API ?\n\nPraticitÃ© car permet de dissocier:\n\nLe client: une interface web () ou un langage informatique (, , â€¦)\nLe serveur: le moteur de calcul derriÃ¨re\n\n\n\n\nSobriÃ©tÃ©: permet lâ€™accÃ¨s Ã  la donnÃ©e voulue sans parcourir tout un fichier\n\n\n\n\nConfidentialitÃ©: on peut mettre des droits dâ€™accÃ¨s Ã  certaines donnÃ©es\n\n\n\n\nUnversalitÃ©: pas dâ€™a priori sur le mode dâ€™accÃ¨s"
  },
  {
    "objectID": "slides-data/api.html#les-api-de-donnÃ©es",
    "href": "slides-data/api.html#les-api-de-donnÃ©es",
    "title": "Les API",
    "section": "Les API de donnÃ©es",
    "text": "Les API de donnÃ©es"
  },
  {
    "objectID": "slides-data/api.html#les-api-de-donnÃ©es-1",
    "href": "slides-data/api.html#les-api-de-donnÃ©es-1",
    "title": "Les API",
    "section": "Les API de donnÃ©es",
    "text": "Les API de donnÃ©es\n\nPlus de fichiers enregistrÃ©s manuellement\n\nMise Ã  jour assurÃ©e par le producteur\nDirectement propagÃ©es au consommateur de donnÃ©es\nPermet lâ€™automatisation de scripts sans stockage local\n\n\n\n\nContrat formel avec un producteur de donnÃ©es\n\nContrairement au webscraping!\n\n\n\n\n\nPermet de rÃ©cupÃ©rer des donnÃ©es transformÃ©es complexes\n\nExemple: infÃ©rences de modÃ¨les ğŸ¤–"
  },
  {
    "objectID": "slides-data/api.html#structuration-dune-requÃªte",
    "href": "slides-data/api.html#structuration-dune-requÃªte",
    "title": "Les API",
    "section": "Structuration dâ€™une requÃªte",
    "text": "Structuration dâ€™une requÃªte\nLes requÃªtes prennent la forme dâ€™URI:\n\n\\[\n\\quad \\underbrace{\\text{https://api-adresse.data.gouv.fr}}_{\\text{API root}}/\\underbrace{\\text{search}}_{\\text{API endpoint}}\n\\]\n\\[\n\\quad /?\\underbrace{\\text{q=88+avenue+verdier}}_{\\text{main parameter}}\\&\\underbrace{\\text{postcode=92120}}_{\\text{additional parameter}}\n\\]\n\nAuxquelles vont sâ€™ajouter des headers (explication Ã  venir)\n\n\n\n\n\n\nNote\n\n\nDÃ©monstration interactive"
  },
  {
    "objectID": "slides-data/api.html#les-requÃªtes-http",
    "href": "slides-data/api.html#les-requÃªtes-http",
    "title": "Les API",
    "section": "Les requÃªtes HTTP",
    "text": "Les requÃªtes HTTP\n\nGET: rÃ©cupÃ©rer des donnÃ©es depuis un serveur web (lecture dâ€™une base de donnÃ©esâ€¦)\nPOST: envoyer des donnÃ©es au serveur (formulaires de mise Ã  jour de donnÃ©es, etc.)\nPython communique avec internet via le package requests (requests.get et requests.post)"
  },
  {
    "objectID": "slides-data/api.html#les-codes-http",
    "href": "slides-data/api.html#les-codes-http",
    "title": "Les API",
    "section": "Les codes HTTP",
    "text": "Les codes HTTP\n\nSignification des codes HTTP\n\n1xx : Informations\n2xx : SuccÃ¨s\n3xx : Redirections\n4xx : Erreurs cÃ´tÃ© client\n5xx : Erreurs cÃ´tÃ© serveur\n\n\n\n\n\n\n\n\nCodes Ã  retenir\n\n\nCeux Ã  retenir sont : 200 (succÃ¨s), 400 (requÃªte mal structurÃ©e), 401 (authentification nonrÃ©ussie), 403 (accÃ¨s interdit), 404 (ressource demandÃ©e nâ€™existe pas), 503 (le serveur nâ€™est pas en capacitÃ© de rÃ©pondre)"
  },
  {
    "objectID": "slides-data/api.html#les-swaggers",
    "href": "slides-data/api.html#les-swaggers",
    "title": "Les API",
    "section": "Les swaggers",
    "text": "Les swaggers\n\n\n\nFormat standardisÃ© de documentation\n\nGÃ©nÃ©ralement ${URL_ROOT}/docs\n\nUtilisation interactive:\n\nGÃ©nÃ¨re des exemples curl (ligne de commande)"
  },
  {
    "objectID": "slides-data/api.html#comment-connaÃ®tre-les-paramÃ¨tres-dune-api",
    "href": "slides-data/api.html#comment-connaÃ®tre-les-paramÃ¨tres-dune-api",
    "title": "Les API",
    "section": "Comment connaÃ®tre les paramÃ¨tres dâ€™une API ?",
    "text": "Comment connaÃ®tre les paramÃ¨tres dâ€™une API ?\n\nSwagger \n\n\n\nOutils dÃ©veloppement navigateur (CTRL+MAJ+K sur ):\n\nOnglet rÃ©seau \n\n\n\n\n\nPostman \n\n\n\n\nExtension  REST Client"
  },
  {
    "objectID": "slides-data/api.html#les-requÃªtes-get",
    "href": "slides-data/api.html#les-requÃªtes-get",
    "title": "Les API",
    "section": "Les requÃªtes GET",
    "text": "Les requÃªtes GET\n\n\n\nRequÃªte la plus commune\n\n\n\nTransformation en objet  (JSON -&gt; dict) est naturelle\n\n\n\n\nFormattage dÃ©pend de chaque API (lire la doc ! ğŸ‘®)\n\n\n\n\nRetravailler lâ€™output peut Ãªtre lourd\n\nimport requests\nadresse = \"88 avenue verdier\"\nurl_ban_example = (\n    f\"https://api-adresse.data.gouv.fr/search/\"\n    f\"?q={adresse.replace(\" \", \"+\")}&postcode=92120\"\n)\nrequests.get(url_ban_example).json()"
  },
  {
    "objectID": "slides-data/api.html#les-requÃªtes-post",
    "href": "slides-data/api.html#les-requÃªtes-post",
    "title": "Les API",
    "section": "Les requÃªtes POST",
    "text": "Les requÃªtes POST\n\n\n\nEnvoyer des donnÃ©es utiles Ã  lâ€™API\nPlus complexe mais Requests est flexible\n\nTransformer les objets  en input de lâ€™API\n\n\nparams = {\n    \"columns\": [\"adresse\", \"Nom_commune\"],\n    \"citycode\": \"DEPCOM\",\n    \"result_columns\": [\"result_score\", \"latitude\", \"longitude\"],\n}\n\nresponse = requests.post(\n        \"https://api-adresse.data.gouv.fr/search/csv/\",\n        data=params,\n        files={\"data\": open(csv_file, \"rb\")},\n    )"
  },
  {
    "objectID": "slides-data/api.html#bonnes-pratiques",
    "href": "slides-data/api.html#bonnes-pratiques",
    "title": "Les API",
    "section": "Bonnes pratiques",
    "text": "Bonnes pratiques\nLa doctrine gÃ©nÃ©rale\n\nSource: Cours de lâ€™ENSAE de mise en production"
  },
  {
    "objectID": "slides-data/api.html#bonnes-pratiques-pour-les-secrets",
    "href": "slides-data/api.html#bonnes-pratiques-pour-les-secrets",
    "title": "Les API",
    "section": "Bonnes pratiques pour les secrets",
    "text": "Bonnes pratiques pour les secrets\n\n\n\nBoite de dialogue via getpass (application interactive uniquement)\n\n\n\nVariables dâ€™environnement:\n\nDans un fichier .env (non committÃ©!) lu avec dotenv\nDans les secrets de lâ€™intÃ©gration continue (cf.Â doc )\n\n\nfrom dotenv import load_dotenv\nload_dotenv()\ntoken = os.getenv(\"MON_PETIT_JETON\")"
  },
  {
    "objectID": "slides-data/api.html#conclusion",
    "href": "slides-data/api.html#conclusion",
    "title": "Les API",
    "section": "Conclusion",
    "text": "Conclusion\n\nPratique pour rÃ©cupÃ©rer des donnÃ©es ponctuelles:\n\nAfficher un nombre limitÃ© dâ€™enregistrements dans une application\nRÃ©cupÃ©rer des donnÃ©es issues dâ€™un processus de transformation complexe\n\n\n\n\nLimitÃ©es en termes de volumÃ©trie ou stabilitÃ© dâ€™accÃ¨s\n\n\n\n\nCode trÃ¨s adhÃ©rant Ã  une API et un langage client"
  },
  {
    "objectID": "slides-data/api.html#des-questions",
    "href": "slides-data/api.html#des-questions",
    "title": "Les API",
    "section": "Des questions ?",
    "text": "Des questions ?"
  }
]