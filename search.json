[
  {
    "objectID": "slides-data/index.html#the-obligatory-intro-slide",
    "href": "slides-data/index.html#the-obligatory-intro-slide",
    "title": "Le format de données Parquet",
    "section": "“The obligatory intro slide”",
    "text": "“The obligatory intro slide”\n\n\n\nSource : motherduck.com"
  },
  {
    "objectID": "slides-data/index.html#enjeux",
    "href": "slides-data/index.html#enjeux",
    "title": "Le format de données Parquet",
    "section": "Enjeux",
    "text": "Enjeux\n\nTendance à la massification des données\n\nRelatif aux capacités de stockage et de traitement\n\n\n\n\n\n\nSource : AI with Python"
  },
  {
    "objectID": "slides-data/index.html#pour-traiter-la-volumétrie",
    "href": "slides-data/index.html#pour-traiter-la-volumétrie",
    "title": "Le format de données Parquet",
    "section": "Pour traiter la volumétrie",
    "text": "Pour traiter la volumétrie\n\nUtiliser un format de données adapté (Parquet)\n\n\n\nUtiliser des outils informatiques adaptés\n\nSuffisant la plupart du temps : calcul larger than memory optimisé (Arrow / DuckDB)\nSi volumétrie massive : calcul distribué (Spark)\n\n\n\n\n\nUtiliser une infra de stockage adaptée (S3)\n\n\n\n\n\n\n\n\n\nNote\n\n\nNous allons voir comment ces trois points sont complémentaires."
  },
  {
    "objectID": "slides-data/index.html#big-data-is-dead",
    "href": "slides-data/index.html#big-data-is-dead",
    "title": "Le format de données Parquet",
    "section": "“Big Data is dead” ?",
    "text": "“Big Data is dead” ?\n\nJordan Tigani : Big Data is dead\n\n“The big data frontier keeps receding”\n“Most people don’t have that much data”\n“Most data is rarely queried”\n\n\n\n\nPlaidoyer pour une parcimonie…\n\n… qui facilite la mise en production !"
  },
  {
    "objectID": "slides-data/index.html#enjeux-1",
    "href": "slides-data/index.html#enjeux-1",
    "title": "Le format de données Parquet",
    "section": "Enjeux",
    "text": "Enjeux\n\nLe choix d’un format de données répond à un arbitrage entre plusieurs critères :\n\nPublic cible\nFinalité (traitement, analyse, diffusion)\nVolumétrie\nInteropérabilité"
  },
  {
    "objectID": "slides-data/index.html#formats-traditionnels",
    "href": "slides-data/index.html#formats-traditionnels",
    "title": "Le format de données Parquet",
    "section": "Formats traditionnels",
    "text": "Formats traditionnels\n\nFormats de données adhérents à un langage (sas7bdat, RDS, fst, etc.)\n\nNon-interopérables -&gt; à éviter !\n\n\n\n\nLe format CSV\n\nInteropérable et simple d’utilisation\nPas de gestion des méta-données\nPeu adapté aux données volumineuses"
  },
  {
    "objectID": "slides-data/index.html#limites-du-csv",
    "href": "slides-data/index.html#limites-du-csv",
    "title": "Le format de données Parquet",
    "section": "Limites du CSV",
    "text": "Limites du CSV\n\n\n\nDes performances limitées\n\nStockage : non-compressé -&gt; espace disque élevé\nLecture : “orienté-ligne” -&gt; performances faibles\n\n\n\n\n\n\n\n\n\nPas de typage des données à l’écriture du fichier\n\nDemande expertise et précaution à la lecture\nExemple: 01004 pour le code commune d’Ambérieu-en-Bugey"
  },
  {
    "objectID": "slides-data/index.html#un-format-léger",
    "href": "slides-data/index.html#un-format-léger",
    "title": "Le format de données Parquet",
    "section": "Un format léger ",
    "text": "Un format léger \n\nStockage :\n\nCompression : entre 5 et 20 fois plus léger qu’un CSV\n\n\n\n\n\n\n\n\n\n\nExemple: Recensement de la Population\n\n\n\nFicher détail : 20 millions de lignes, 92 variables\n\nCSV: &gt; 4Go\nParquet: &lt; 500Mo"
  },
  {
    "objectID": "slides-data/index.html#un-format-efficace",
    "href": "slides-data/index.html#un-format-efficace",
    "title": "Le format de données Parquet",
    "section": "Un format efficace",
    "text": "Un format efficace\n\nLecture :\n\nJusqu’à 34x plus rapide qu’un CSV\n\n\n\n\n“Orienté colonne”\n\nOptimisé pour les traitements analytiques\nLimite la quantité de données à mettre en mémoire\nConçu pour être écrit une fois mais lu fréquemment"
  },
  {
    "objectID": "slides-data/index.html#pour-optimiser-la-lecture",
    "href": "slides-data/index.html#pour-optimiser-la-lecture",
    "title": "Le format de données Parquet",
    "section": "Pour optimiser la lecture",
    "text": "Pour optimiser la lecture\n\nPartitionner ou ordonner les données\n\n\n\n\n\n\n\n\n\n\n\n\n\nL’art de bien partitionner\n\n\n\nPartitionner par une/des variable(s) d’intérêt si gros fichier\n\nEviter de créer de nombreux petits (&lt; 128Mo) fichiers\n\nSinon ordonner les données avant d’écrire le fichier (cf. Eric Mauvière)"
  },
  {
    "objectID": "slides-data/index.html#un-format-universel-et-fiable",
    "href": "slides-data/index.html#un-format-universel-et-fiable",
    "title": "Le format de données Parquet",
    "section": "Un format universel et fiable",
    "text": "Un format universel et fiable\n\nGestion native des méta-données\n\nDéfinition automatique d’un schéma (noms, types)\nMise à disposition plus robuste\n\n\n\n\nInteropérable\n\n\n\n\nOpen-source\n\n\n\n\nNon lisible par un humain mais de plus en plus de visualiseurs en ligne\n\nPar exemple sur le SSPCloud"
  },
  {
    "objectID": "slides-data/index.html#parquet-quels-avantages",
    "href": "slides-data/index.html#parquet-quels-avantages",
    "title": "Le format de données Parquet",
    "section": "Parquet: quels avantages ?",
    "text": "Parquet: quels avantages ?\n\nFormat libre, open source et indépendant du langage ;\n\nLes formats propriétaires imposent des outils aux consommateurs !\n\nPlus de confort pour les utilisateurs:\n\nDes requêtes plus rapides et efficaces: seulement les données nécessaires sont lues\nDes données conformes à la mise à disposition par le producteur"
  },
  {
    "objectID": "slides-data/index.html#parquet-quels-usages",
    "href": "slides-data/index.html#parquet-quels-usages",
    "title": "Le format de données Parquet",
    "section": "Parquet: quels usages ?",
    "text": "Parquet: quels usages ?\n\nFormat privilégié pour la mise à disposition de données internes à l’Insee:\n\nMoins d’asymétries entre utilisateurs et producteurs.\n\n\n\n\n\n\n\n\n\nPremières diffusions à l’externe\n\n\n\nBureaux de votes du répertoire électoral unique (REU):\nRecensement de la population (RP)\nBase permanente des équipements (BPE)"
  },
  {
    "objectID": "slides-data/index.html#parquet-quels-usages-1",
    "href": "slides-data/index.html#parquet-quels-usages-1",
    "title": "Le format de données Parquet",
    "section": "Parquet: quels usages ?",
    "text": "Parquet: quels usages ?\n\n\n\n\n\n\nExemples de cartes pouvant être produites simplement avec les données du recensement diffusées par l’Insee"
  },
  {
    "objectID": "slides-data/index.html#enjeu",
    "href": "slides-data/index.html#enjeu",
    "title": "Le format de données Parquet",
    "section": "Enjeu",
    "text": "Enjeu\n\nParquet ne résout pas tout\n\nL’espace disque est optimisé\nLes données décompressées doivent passer en RAM\n\n\n\n\nLe framework adapté dépend de la volumétrie\n\nPour la plupart des besoins : Arrow et DuckDB"
  },
  {
    "objectID": "slides-data/index.html#les-frameworks",
    "href": "slides-data/index.html#les-frameworks",
    "title": "Le format de données Parquet",
    "section": "Les frameworks",
    "text": "Les frameworks\n\nDeux frameworks de référence : Arrow et DuckDB\n\nOrientation fichier (Arrow) VS orientation BDD (DuckDB)\n\n\n\n\nTraitement en-mémoire optimisé\n\nOrientés-colonne\nLazy evaluation (prochaine slide)\n\n\n\n\n\nTrès bonne intégration:\n\nAvec le tidyverse ()\nAvec le système de stockage S3"
  },
  {
    "objectID": "slides-data/index.html#les-frameworks-1",
    "href": "slides-data/index.html#les-frameworks-1",
    "title": "Le format de données Parquet",
    "section": "Les frameworks",
    "text": "Les frameworks"
  },
  {
    "objectID": "slides-data/index.html#la-lazy-evaluation",
    "href": "slides-data/index.html#la-lazy-evaluation",
    "title": "Le format de données Parquet",
    "section": "La lazy evaluation",
    "text": "La lazy evaluation\n\nLes frameworks comme Arrow ou DuckDB n’exécutent pas immédiatement les opérations\n\n\n\nLes instructions sont optimisées avant exécution\n\nVous écrivez un plan d’exécution, réinterprété\n\n\n\n\n\nAvantages :\n\nMoins de données manipulées inutilement\nMoins de RAM consommée\nExécution plus rapide car optimisée"
  },
  {
    "objectID": "slides-data/index.html#la-lazy-evaluation-1",
    "href": "slides-data/index.html#la-lazy-evaluation-1",
    "title": "Le format de données Parquet",
    "section": "La lazy evaluation",
    "text": "La lazy evaluation\n\n\n\n\n\n\n\nExemple d’une requête lazy\n\n\nEn supposant qu’achille est un objet Arrow ou DuckDB:\nn_logements_depcom &lt;- achille |&gt;\n1  filter(dep %in% c(\"01\", \"02\", \"03\")) |&gt;\n2  select(idlogement, depcom) |&gt;\n  group_by(depcom) |&gt;\n  summarise(n_logements = n()) |&gt;\n3  collect()\n\n1\n\nRécupère seulement les données nécessaires\n\n2\n\nRécupère seulement les variables nécessaires\n\n3\n\nLes calculs ne sont effectués qu’à cette étape !"
  },
  {
    "objectID": "slides-data/index.html#la-lazy-evaluation-2",
    "href": "slides-data/index.html#la-lazy-evaluation-2",
    "title": "Le format de données Parquet",
    "section": "La lazy evaluation",
    "text": "La lazy evaluation\n\nVoici le début du plan:\n\n\n❓️ Pourrait-il être optimisé ?"
  },
  {
    "objectID": "slides-data/index.html#la-lazy-evaluation-3",
    "href": "slides-data/index.html#la-lazy-evaluation-3",
    "title": "Le format de données Parquet",
    "section": "La lazy evaluation",
    "text": "La lazy evaluation\n\nVoici le plan plus optimal:\n\nPredicate pushdown"
  },
  {
    "objectID": "slides-data/index.html#parquet-gagne-sur-tous-les-tableaux",
    "href": "slides-data/index.html#parquet-gagne-sur-tous-les-tableaux",
    "title": "Le format de données Parquet",
    "section": "Parquet gagne sur tous les tableaux",
    "text": "Parquet gagne sur tous les tableaux\n\n\n\nBenchmarks faits pour la formation aux bonnes pratiques de l’Insee"
  },
  {
    "objectID": "slides-data/index.html#ressources-complémentaires",
    "href": "slides-data/index.html#ressources-complémentaires",
    "title": "Le format de données Parquet",
    "section": "Ressources complémentaires",
    "text": "Ressources complémentaires\n\nLes posts d’Eric Mauvière sur icem7.fr/\n\n\n\nWebinaire du CASD sur Parquet et DuckDB\n\n\n\n\nLa formation aux bonnes pratiques de l’Insee\n\n\n\n\nUn atelier de l’EHESS sur Parquet avec de nombreux exemples ici\n\n\n\n\nLe cours de mise en production de l’ENSAE"
  },
  {
    "objectID": "slides-data/index.html#applications",
    "href": "slides-data/index.html#applications",
    "title": "Le format de données Parquet",
    "section": "Applications",
    "text": "Applications"
  },
  {
    "objectID": "slides-data/index.html#ce-nest-pas-fini",
    "href": "slides-data/index.html#ce-nest-pas-fini",
    "title": "Le format de données Parquet",
    "section": "Ce n’est pas fini !",
    "text": "Ce n’est pas fini !"
  },
  {
    "objectID": "slides-data/index.html#nouvelles-opportunités-avec-cet-écosystème",
    "href": "slides-data/index.html#nouvelles-opportunités-avec-cet-écosystème",
    "title": "Le format de données Parquet",
    "section": "Nouvelles opportunités avec cet écosystème",
    "text": "Nouvelles opportunités avec cet écosystème\n\nIntégration native avec S3\n\nPour travailler sur des serveurs à l’état de l’art…\nPlutôt que sur des ordinateurs aux ressources limitées\n\n\n\n\nDuckDB WASM pour faire du DuckDB dans le navigateur :\n\nPour des dataviz réactives… dans des sites statiques !\nBye bye les galères de déploiement de Shiny, Streamlit…"
  },
  {
    "objectID": "slides-data/index.html#les-extensions-spatiales",
    "href": "slides-data/index.html#les-extensions-spatiales",
    "title": "Le format de données Parquet",
    "section": "Les extensions spatiales",
    "text": "Les extensions spatiales\n\nPossibilité de lire/écrire des objets géographiques dans Parquet\n\nCompatible avec les standards GeoParquet\nExtension SPATIAL\n\n\n\n\nPermet des traitements géographiques efficaces :\n\nJointures spatiales, calculs de distance…\nRécupère le résultat sous sf"
  },
  {
    "objectID": "slides-data/index.html#travailler-avec-s3",
    "href": "slides-data/index.html#travailler-avec-s3",
    "title": "Le format de données Parquet",
    "section": "Travailler avec S3",
    "text": "Travailler avec S3\n\nBeaucoup plus simple qu’un data warehouse et des VM postgre\n\n\n\nOn peut lire la donnée sur S3 presque comme si elle était en local\n\nFROM 's3://bucket_name/filename.extension';\nSELECT *\nWHERE DEPT=='36'"
  },
  {
    "objectID": "slides-data/index.html#duckdb-dans-le-navigateur",
    "href": "slides-data/index.html#duckdb-dans-le-navigateur",
    "title": "Le format de données Parquet",
    "section": "DuckDB dans le navigateur",
    "text": "DuckDB dans le navigateur\n\nGrâce à DuckDB-WASM, on peut exécuter du SQL dans le navigateur 🎯\n\nEmbarqué par défaut sur Observablehq et Quarto\n\n\n\n\nIdéal pour des applications interactives :\n\nVisualisations réactives sur des sites statiques\n⚡ Pas besoin de serveur  ou , tout est côté client !"
  },
  {
    "objectID": "slides-data/index.html#exemple",
    "href": "slides-data/index.html#exemple",
    "title": "Le format de données Parquet",
    "section": "Exemple",
    "text": "Exemple\n\ncontainer\n\n\n\n\n\n\n\nimport {container, } from \"@linogaliana/atelier-parquet-ssphub\""
  }
]