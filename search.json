[
  {
    "objectID": "slides-data/index.html#the-obligatory-intro-slide",
    "href": "slides-data/index.html#the-obligatory-intro-slide",
    "title": "Le format de données Parquet",
    "section": "“The obligatory intro slide”",
    "text": "“The obligatory intro slide”\n\n\n\nSource : motherduck.com"
  },
  {
    "objectID": "slides-data/index.html#enjeux",
    "href": "slides-data/index.html#enjeux",
    "title": "Le format de données Parquet",
    "section": "Enjeux",
    "text": "Enjeux\n\nTendance à la massification des données\n\nRelatif aux capacités de stockage et de traitement\n\n\n\n\n\n\nSource : AI with Python"
  },
  {
    "objectID": "slides-data/index.html#pour-traiter-la-volumétrie",
    "href": "slides-data/index.html#pour-traiter-la-volumétrie",
    "title": "Le format de données Parquet",
    "section": "Pour traiter la volumétrie",
    "text": "Pour traiter la volumétrie\n\nUtiliser une infra de stockage adaptée (S3)\nUtiliser un format de données adapté (Parquet)\nUtiliser des outils informatiques adaptés\n\nSuffisant la plupart du temps : calcul larger than memory optimisé (Arrow / DuckDB)\nSi volumétrie massive : calcul distribué (Spark)"
  },
  {
    "objectID": "slides-data/index.html#big-data-is-dead",
    "href": "slides-data/index.html#big-data-is-dead",
    "title": "Le format de données Parquet",
    "section": "“Big Data is dead” ?",
    "text": "“Big Data is dead” ?\n\nJordan Tigani : Big Data is dead\n\n“The big data frontier keeps receding”\n“Most people don’t have that much data”\n“Most data is rarely queried”\n\nPlaidoyer pour une parcimonie…\n\n… qui facilite la mise en production !"
  },
  {
    "objectID": "slides-data/index.html#enjeux-1",
    "href": "slides-data/index.html#enjeux-1",
    "title": "Le format de données Parquet",
    "section": "Enjeux",
    "text": "Enjeux\n\nLe choix d’un format de données répond à un arbitrage entre plusieurs critères :\n\nPublic cible\nFinalité (traitement, analyse, diffusion)\nVolumétrie\nInteropérabilité"
  },
  {
    "objectID": "slides-data/index.html#formats-traditionnels",
    "href": "slides-data/index.html#formats-traditionnels",
    "title": "Le format de données Parquet",
    "section": "Formats traditionnels",
    "text": "Formats traditionnels\n\nFormats de données adhérents à un langage (sas7bdat, RDS, fst, etc.)\n\nNon-interopérables -&gt; à éviter !\n\nLe format CSV\n\nInteropérable et simple d’utilisation\nPas de gestion des méta-données\nPeu adapté aux données volumineuses"
  },
  {
    "objectID": "slides-data/index.html#limites-du-csv",
    "href": "slides-data/index.html#limites-du-csv",
    "title": "Le format de données Parquet",
    "section": "Limites du CSV",
    "text": "Limites du CSV\n\n\n\nDes performances limitées\n\nStockage : non-compressé -&gt; espace disque élevé\nLecture : “orienté-ligne” -&gt; performances faibles\n\n\n\n\n\n\n\n\n\nPas de typage des données à l’écriture du fichier\n\nDemande expertise et précaution à la lecture\nExemple: 01004 pour le code commune d’Ambérieu-en-Bugey"
  },
  {
    "objectID": "slides-data/index.html#un-format-léger",
    "href": "slides-data/index.html#un-format-léger",
    "title": "Le format de données Parquet",
    "section": "Un format léger ",
    "text": "Un format léger \n\nStockage :\n\nCompression : entre 5 et 20 fois plus léger qu’un CSV\n\n\n\n\n\n\n\n\n\n\nExemple: Recensement de la Population\n\n\n\nFicher détail : 20 millions de lignes, 92 variables\n\nCSV: &gt; 4Go\nParquet: &lt; 500Mo"
  },
  {
    "objectID": "slides-data/index.html#le-format-parquet",
    "href": "slides-data/index.html#le-format-parquet",
    "title": "Le format de données Parquet",
    "section": "Le format Parquet",
    "text": "Le format Parquet\n\nLecture :\n\nJusqu’à 34x plus rapide qu’un CSV\n\n“Orienté colonne”\n\nOptimisé pour les traitements analytiques\nLimite la quantité de données à mettre en mémoire"
  },
  {
    "objectID": "slides-data/index.html#le-format-parquet-1",
    "href": "slides-data/index.html#le-format-parquet-1",
    "title": "Le format de données Parquet",
    "section": "Le format Parquet",
    "text": "Le format Parquet\n\nPartitionner les données pour optimiser la lecture\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nL’art de bien partitionner\n\n\n\nPartitionner par une/des variable(s) d’intérêt\nEviter de créer de nombreux petits (&lt; 128Mo) fichiers"
  },
  {
    "objectID": "slides-data/index.html#le-format-parquet-2",
    "href": "slides-data/index.html#le-format-parquet-2",
    "title": "Le format de données Parquet",
    "section": "Le format Parquet",
    "text": "Le format Parquet\n\nGestion native des méta-données\n\nDéfinition automatique d’un schéma (noms, types)\nMise à disposition plus robuste\n\nInteropérable\nOpen-source"
  },
  {
    "objectID": "slides-data/index.html#le-format-parquet-3",
    "href": "slides-data/index.html#le-format-parquet-3",
    "title": "Le format de données Parquet",
    "section": "Le format Parquet",
    "text": "Le format Parquet\n\nDeux frameworks de référence : Arrow et DuckDB\n\nOrientation fichier (Arrow) VS orientation BDD (DuckDB)\nTrès bonne intégration avec le tidyverse\n\nTraitement en-mémoire optimisé\n\nOrientés-colonne\nLazy evaluation\n\n\n\n\n\n\n\n\n\n\nExemple d’une requête lazy\n\n\nn_logements_depcom &lt;- achille |&gt;\n  filter(dep %in% c(\"01\", \"02\", \"03\")) |&gt;  # Récupère seulement les données nécessaires\n  select(idlogement, depcom) |&gt;  # Récupère seulement les colonnes nécessaires\n  group_by(depcom) |&gt;\n  summarise(n_logements = n()) |&gt;\n  collect()  # Les calculs ne sont effectués qu'à cette étape !"
  },
  {
    "objectID": "slides-data/index.html#le-format-parquet-4",
    "href": "slides-data/index.html#le-format-parquet-4",
    "title": "Le format de données Parquet",
    "section": "Le format Parquet",
    "text": "Le format Parquet\n\nParquet gagne sur tous les tableaux"
  },
  {
    "objectID": "slides-data/api.html#quest-ce-quune-api",
    "href": "slides-data/api.html#quest-ce-quune-api",
    "title": "Les API",
    "section": "Qu’est-ce qu’une API ?",
    "text": "Qu’est-ce qu’une API ?\n\n::: {style=“font-size: 70\n\nUne APplication programming interface ou « interface de programmation d’application ») est une interface logicielle qui permet de « connecter » un logiciel ou un service à un autre logiciel ou service afin d’échanger des données et des fonctionnalités.\nCNIL\n\n:::\n\nDéfinition peu informative:\n\nPython, scikit-learn, Docker, etc. sont des APIs\nEn pratique, on signifie généralement une API REST"
  },
  {
    "objectID": "slides-data/api.html#les-apis-rest",
    "href": "slides-data/api.html#les-apis-rest",
    "title": "Les API",
    "section": "Les APIs REST",
    "text": "Les APIs REST\n\n\nAPI RESTful : API conforme au style d’architecture REST\n\nCommunication via le protocole HTTP\n\n\n\n\nEn pratique :\n\nOn accède à un endpoint (ex : l’API de la BAN)\nAvec des requêtes HTTP (GET, POST, etc.) (ex : rues contenant “comédie”)"
  },
  {
    "objectID": "slides-data/api.html#analogie-avec-un-restaurant",
    "href": "slides-data/api.html#analogie-avec-un-restaurant",
    "title": "Les API",
    "section": "Analogie avec un restaurant",
    "text": "Analogie avec un restaurant\n\n\n💬 Vous passez commande\n\nRequête avec paramètres depuis , , votre navigateur…\n\n\n\n\n↔︎️ Le serveur transmet la commande en cuisine:\n\nPoint d’entrée de l’API\n\n\n\n\n\n🧑‍🍳 La cuisine prépare le plat\n\nLe serveur (informatique) fait les traitements ad hoc\n\n\n\n\n\n🍕 Vous recevez votre plat\n\nVous recevez une réponse au format JSON"
  },
  {
    "objectID": "slides-data/api.html#pourquoi-les-api",
    "href": "slides-data/api.html#pourquoi-les-api",
    "title": "Les API",
    "section": "Pourquoi les API ?",
    "text": "Pourquoi les API ?\n\nPraticité car permet de dissocier:\n\nLe client: une interface web () ou un langage informatique (, , …)\nLe serveur: le moteur de calcul derrière\n\n\n\n\nSobriété: permet l’accès à la donnée voulue sans parcourir tout un fichier\n\n\n\n\nConfidentialité: on peut mettre des droits d’accès à certaines données\n\n\n\n\nUnversalité: pas d’a priori sur le mode d’accès"
  },
  {
    "objectID": "slides-data/api.html#les-api-de-données",
    "href": "slides-data/api.html#les-api-de-données",
    "title": "Les API",
    "section": "Les API de données",
    "text": "Les API de données"
  },
  {
    "objectID": "slides-data/api.html#les-api-de-données-1",
    "href": "slides-data/api.html#les-api-de-données-1",
    "title": "Les API",
    "section": "Les API de données",
    "text": "Les API de données\n\nPlus de fichiers enregistrés manuellement\n\nMise à jour assurée par le producteur\nDirectement propagées au consommateur de données\nPermet l’automatisation de scripts sans stockage local\n\n\n\n\nContrat formel avec un producteur de données\n\nContrairement au webscraping!\n\n\n\n\n\nPermet de récupérer des données transformées complexes\n\nExemple: inférences de modèles 🤖"
  },
  {
    "objectID": "slides-data/api.html#structuration-dune-requête",
    "href": "slides-data/api.html#structuration-dune-requête",
    "title": "Les API",
    "section": "Structuration d’une requête",
    "text": "Structuration d’une requête\nLes requêtes prennent la forme d’URI:\n\n\\[\n\\quad \\underbrace{\\text{https://api-adresse.data.gouv.fr}}_{\\text{API root}}/\\underbrace{\\text{search}}_{\\text{API endpoint}}\n\\]\n\\[\n\\quad /?\\underbrace{\\text{q=88+avenue+verdier}}_{\\text{main parameter}}\\&\\underbrace{\\text{postcode=92120}}_{\\text{additional parameter}}\n\\]\n\nAuxquelles vont s’ajouter des headers (explication à venir)\n\n\n\n\n\n\nNote\n\n\nDémonstration interactive"
  },
  {
    "objectID": "slides-data/api.html#les-requêtes-http",
    "href": "slides-data/api.html#les-requêtes-http",
    "title": "Les API",
    "section": "Les requêtes HTTP",
    "text": "Les requêtes HTTP\n\nGET: récupérer des données depuis un serveur web (lecture d’une base de données…)\nPOST: envoyer des données au serveur (formulaires de mise à jour de données, etc.)\nPython communique avec internet via le package requests (requests.get et requests.post)"
  },
  {
    "objectID": "slides-data/api.html#les-codes-http",
    "href": "slides-data/api.html#les-codes-http",
    "title": "Les API",
    "section": "Les codes HTTP",
    "text": "Les codes HTTP\n\nSignification des codes HTTP\n\n1xx : Informations\n2xx : Succès\n3xx : Redirections\n4xx : Erreurs côté client\n5xx : Erreurs côté serveur\n\n\n\n\n\n\n\n\nCodes à retenir\n\n\nCeux à retenir sont : 200 (succès), 400 (requête mal structurée), 401 (authentification nonréussie), 403 (accès interdit), 404 (ressource demandée n’existe pas), 503 (le serveur n’est pas en capacité de répondre)"
  },
  {
    "objectID": "slides-data/api.html#les-swaggers",
    "href": "slides-data/api.html#les-swaggers",
    "title": "Les API",
    "section": "Les swaggers",
    "text": "Les swaggers\n\n\n\nFormat standardisé de documentation\n\nGénéralement ${URL_ROOT}/docs\n\nUtilisation interactive:\n\nGénère des exemples curl (ligne de commande)"
  },
  {
    "objectID": "slides-data/api.html#comment-connaître-les-paramètres-dune-api",
    "href": "slides-data/api.html#comment-connaître-les-paramètres-dune-api",
    "title": "Les API",
    "section": "Comment connaître les paramètres d’une API ?",
    "text": "Comment connaître les paramètres d’une API ?\n\nSwagger \n\n\n\nOutils développement navigateur (CTRL+MAJ+K sur ):\n\nOnglet réseau \n\n\n\n\n\nPostman \n\n\n\n\nExtension  REST Client"
  },
  {
    "objectID": "slides-data/api.html#les-requêtes-get",
    "href": "slides-data/api.html#les-requêtes-get",
    "title": "Les API",
    "section": "Les requêtes GET",
    "text": "Les requêtes GET\n\n\n\nRequête la plus commune\n\n\n\nTransformation en objet  (JSON -&gt; dict) est naturelle\n\n\n\n\nFormattage dépend de chaque API (lire la doc ! 👮)\n\n\n\n\nRetravailler l’output peut être lourd\n\nimport requests\nadresse = \"88 avenue verdier\"\nurl_ban_example = (\n    f\"https://api-adresse.data.gouv.fr/search/\"\n    f\"?q={adresse.replace(\" \", \"+\")}&postcode=92120\"\n)\nrequests.get(url_ban_example).json()"
  },
  {
    "objectID": "slides-data/api.html#les-requêtes-post",
    "href": "slides-data/api.html#les-requêtes-post",
    "title": "Les API",
    "section": "Les requêtes POST",
    "text": "Les requêtes POST\n\n\n\nEnvoyer des données utiles à l’API\nPlus complexe mais Requests est flexible\n\nTransformer les objets  en input de l’API\n\n\nparams = {\n    \"columns\": [\"adresse\", \"Nom_commune\"],\n    \"citycode\": \"DEPCOM\",\n    \"result_columns\": [\"result_score\", \"latitude\", \"longitude\"],\n}\n\nresponse = requests.post(\n        \"https://api-adresse.data.gouv.fr/search/csv/\",\n        data=params,\n        files={\"data\": open(csv_file, \"rb\")},\n    )"
  },
  {
    "objectID": "slides-data/api.html#bonnes-pratiques",
    "href": "slides-data/api.html#bonnes-pratiques",
    "title": "Les API",
    "section": "Bonnes pratiques",
    "text": "Bonnes pratiques\nLa doctrine générale\n\nSource: Cours de l’ENSAE de mise en production"
  },
  {
    "objectID": "slides-data/api.html#bonnes-pratiques-pour-les-secrets",
    "href": "slides-data/api.html#bonnes-pratiques-pour-les-secrets",
    "title": "Les API",
    "section": "Bonnes pratiques pour les secrets",
    "text": "Bonnes pratiques pour les secrets\n\n\n\nBoite de dialogue via getpass (application interactive uniquement)\n\n\n\nVariables d’environnement:\n\nDans un fichier .env (non committé!) lu avec dotenv\nDans les secrets de l’intégration continue (cf. doc )\n\n\nfrom dotenv import load_dotenv\nload_dotenv()\ntoken = os.getenv(\"MON_PETIT_JETON\")"
  },
  {
    "objectID": "slides-data/api.html#conclusion",
    "href": "slides-data/api.html#conclusion",
    "title": "Les API",
    "section": "Conclusion",
    "text": "Conclusion\n\nPratique pour récupérer des données ponctuelles:\n\nAfficher un nombre limité d’enregistrements dans une application\nRécupérer des données issues d’un processus de transformation complexe\n\n\n\n\nLimitées en termes de volumétrie ou stabilité d’accès\n\n\n\n\nCode très adhérant à une API et un langage client"
  },
  {
    "objectID": "slides-data/api.html#des-questions",
    "href": "slides-data/api.html#des-questions",
    "title": "Les API",
    "section": "Des questions ?",
    "text": "Des questions ?"
  }
]