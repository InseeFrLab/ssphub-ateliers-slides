[
  {
    "objectID": "slides-data/api.html#quest-ce-quune-api",
    "href": "slides-data/api.html#quest-ce-quune-api",
    "title": "Masterclass API",
    "section": "Quâ€™est-ce quâ€™une API ?",
    "text": "Quâ€™est-ce quâ€™une API ?\n\n\n\nUne API (application programming interface ou Â« interface de programmation dâ€™application Â») est une interface logicielle qui permet de Â« connecter Â» un logiciel ou un service Ã  un autre logiciel ou service afin dâ€™Ã©changer des donnÃ©es et des fonctionnalitÃ©s.\nCNIL\n\n\n\nDÃ©finition peu informative:\n\nPython, scikit-learn, Docker, etc. sont des APIs\nEn pratique, on signifie gÃ©nÃ©ralement une API REST"
  },
  {
    "objectID": "slides-data/api.html#les-apis-rest",
    "href": "slides-data/api.html#les-apis-rest",
    "title": "Masterclass API",
    "section": "Les APIs REST",
    "text": "Les APIs REST\n\n\nAPI RESTful : API conforme au style dâ€™architecture REST\n\nCommunication via le protocole HTTP\n\n\n\n\nEn pratique :\n\nOn accÃ¨de Ã  un endpoint (ex : lâ€™API de la BAN)\nAvec des requÃªtes HTTP (GET, POST, etc.) (ex : rues contenant â€œcomÃ©dieâ€)"
  },
  {
    "objectID": "slides-data/api.html#analogie-avec-un-restaurant",
    "href": "slides-data/api.html#analogie-avec-un-restaurant",
    "title": "Masterclass API",
    "section": "Analogie avec un restaurant",
    "text": "Analogie avec un restaurant\n\n\nğŸ’¬ Vous passez commande\n\nRequÃªte avec paramÃ¨tres depuis , , votre navigateurâ€¦\n\n\n\n\nâ†”ï¸ï¸ Le serveur transmet la commande en cuisine:\n\nPoint dâ€™entrÃ©e de lâ€™API\n\n\n\n\n\nğŸ§‘â€ğŸ³ La cuisine prÃ©pare le plat\n\nLe serveur (informatique) fait les traitements ad hoc\n\n\n\n\n\nğŸ• Vous recevez votre plat\n\nVous recevez une rÃ©ponse au format JSON"
  },
  {
    "objectID": "slides-data/api.html#pourquoi-les-api",
    "href": "slides-data/api.html#pourquoi-les-api",
    "title": "Masterclass API",
    "section": "Pourquoi les API ?",
    "text": "Pourquoi les API ?\n\nPraticitÃ© car permet de dissocier:\n\nLe client: une interface web () ou un langage informatique (, , â€¦)\nLe serveur: le moteur de calcul derriÃ¨re\n\n\n\n\nSobriÃ©tÃ©: permet lâ€™accÃ¨s Ã  la donnÃ©e voulue sans parcourir tout un fichier\n\n\n\n\nConfidentialitÃ©: on peut mettre des droits dâ€™accÃ¨s Ã  certaines donnÃ©es\n\n\n\n\nUnversalitÃ©: pas dâ€™a priori sur le mode dâ€™accÃ¨s"
  },
  {
    "objectID": "slides-data/api.html#les-api-de-donnÃ©es",
    "href": "slides-data/api.html#les-api-de-donnÃ©es",
    "title": "Masterclass API",
    "section": "Les API de donnÃ©es",
    "text": "Les API de donnÃ©es"
  },
  {
    "objectID": "slides-data/api.html#les-api-de-donnÃ©es-1",
    "href": "slides-data/api.html#les-api-de-donnÃ©es-1",
    "title": "Masterclass API",
    "section": "Les API de donnÃ©es",
    "text": "Les API de donnÃ©es\n\nPlus de fichiers enregistrÃ©s manuellement\n\nMise Ã  jour assurÃ©e par le producteur\nDirectement propagÃ©es au consommateur de donnÃ©es\nPermet lâ€™automatisation de scripts sans stockage local\n\n\n\n\nContrat formel avec un producteur de donnÃ©es\n\nContrairement au webscraping!\n\n\n\n\n\nPermet de rÃ©cupÃ©rer des donnÃ©es transformÃ©es complexes\n\nExemple: infÃ©rences de modÃ¨les ğŸ¤–"
  },
  {
    "objectID": "slides-data/api.html#structuration-dune-requÃªte",
    "href": "slides-data/api.html#structuration-dune-requÃªte",
    "title": "Masterclass API",
    "section": "Structuration dâ€™une requÃªte",
    "text": "Structuration dâ€™une requÃªte\nLes requÃªtes prennent la forme dâ€™URI:\n\n\\[\n\\quad \\underbrace{\\text{https://api-adresse.data.gouv.fr}}_{\\text{API root}}/\\underbrace{\\text{search}}_{\\text{API endpoint}}\n\\]\n\\[\n\\quad /?\\underbrace{\\text{q=88+avenue+verdier}}_{\\text{main parameter}}\\&\\underbrace{\\text{postcode=92120}}_{\\text{additional parameter}}\n\\]\n\nAuxquelles vont sâ€™ajouter des headers (explication Ã  venir)\n\n\n\n\n\n\nNote\n\n\nDÃ©monstration interactive"
  },
  {
    "objectID": "slides-data/api.html#les-requÃªtes-http",
    "href": "slides-data/api.html#les-requÃªtes-http",
    "title": "Masterclass API",
    "section": "Les requÃªtes HTTP",
    "text": "Les requÃªtes HTTP\n\nGET: rÃ©cupÃ©rer des donnÃ©es depuis un serveur web (lecture dâ€™une base de donnÃ©esâ€¦)\nPOST: envoyer des donnÃ©es au serveur (formulaires de mise Ã  jour de donnÃ©es, etc.)\nPython communique avec internet via le package requests (requests.get et requests.post)"
  },
  {
    "objectID": "slides-data/api.html#les-codes-http",
    "href": "slides-data/api.html#les-codes-http",
    "title": "Masterclass API",
    "section": "Les codes HTTP",
    "text": "Les codes HTTP\n\nSignification des codes HTTP\n\n1xx : Informations\n2xx : SuccÃ¨s\n3xx : Redirections\n4xx : Erreurs cÃ´tÃ© client\n5xx : Erreurs cÃ´tÃ© serveur\n\n\n\n\n\n\n\n\nCodes Ã  retenir\n\n\nCeux Ã  retenir sont : 200 (succÃ¨s), 400 (requÃªte mal structurÃ©e), 401 (authentification nonrÃ©ussie), 403 (accÃ¨s interdit), 404 (ressource demandÃ©e nâ€™existe pas), 503 (le serveur nâ€™est pas en capacitÃ© de rÃ©pondre)"
  },
  {
    "objectID": "slides-data/api.html#les-swaggers",
    "href": "slides-data/api.html#les-swaggers",
    "title": "Masterclass API",
    "section": "Les swaggers",
    "text": "Les swaggers\n\n\n\nFormat standardisÃ© de documentation\n\nGÃ©nÃ©ralement ${URL_ROOT}/docs\n\nUtilisation interactive:\n\nGÃ©nÃ¨re des exemples curl (ligne de commande)"
  },
  {
    "objectID": "slides-data/api.html#comment-connaÃ®tre-les-paramÃ¨tres-dune-api",
    "href": "slides-data/api.html#comment-connaÃ®tre-les-paramÃ¨tres-dune-api",
    "title": "Masterclass API",
    "section": "Comment connaÃ®tre les paramÃ¨tres dâ€™une API ?",
    "text": "Comment connaÃ®tre les paramÃ¨tres dâ€™une API ?\n\nSwagger {{&lt; iconify vscode-icons:file-type-swagger &gt;}}\n\n\n\nOutils dÃ©veloppement navigateur (CTRL+MAJ+K sur ):\n\nOnglet rÃ©seau {{&lt; iconify uil:arrows-v &gt;}}\n\n\n\n\n\nPostman {{&lt; iconify vscode-icons:file-type-postman &gt;}}\n\n\n\n\nExtension {{&lt; iconify vscode-icons:file-type-vscode &gt;}} REST Client"
  },
  {
    "objectID": "slides-data/api.html#les-requÃªtes-get",
    "href": "slides-data/api.html#les-requÃªtes-get",
    "title": "Masterclass API",
    "section": "Les requÃªtes GET",
    "text": "Les requÃªtes GET\n\n\n\nRequÃªte la plus commune\n\n\n\nTransformation en objet  (JSON -&gt; dict) est naturelle\n\n\n\n\nFormattage dÃ©pend de chaque API (lire la doc ! ğŸ‘®)\n\n\n\n\nRetravailler lâ€™output peut Ãªtre lourd\n\nimport requests\nadresse = \"88 avenue verdier\"\nurl_ban_example = (\n    f\"https://api-adresse.data.gouv.fr/search/\"\n    f\"?q={adresse.replace(\" \", \"+\")}&postcode=92120\"\n)\nrequests.get(url_ban_example).json()"
  },
  {
    "objectID": "slides-data/api.html#les-requÃªtes-post",
    "href": "slides-data/api.html#les-requÃªtes-post",
    "title": "Masterclass API",
    "section": "Les requÃªtes POST",
    "text": "Les requÃªtes POST\n\nPlus complexe mais requests est suffisamment flexible\nPlus compliquÃ© est de rentrer les objets Python dans le cadre de lâ€™API\n\nparams = {\n    \"columns\": [\"adresse\", \"Nom_commune\"],\n    \"citycode\": \"DEPCOM\",\n    \"result_columns\": [\"result_score\", \"latitude\", \"longitude\"],\n}\n\nresponse = requests.post(\n        \"https://api-adresse.data.gouv.fr/search/csv/\",\n        data=params,\n        files={\"data\": open(csv_file, \"rb\")},\n    )"
  },
  {
    "objectID": "slides-data/api.html#bonnes-pratiques",
    "href": "slides-data/api.html#bonnes-pratiques",
    "title": "Masterclass API",
    "section": "Bonnes pratiques",
    "text": "Bonnes pratiques\nLa doctrine gÃ©nÃ©rale"
  },
  {
    "objectID": "slides-data/api.html#bonnes-pratiques-pour-les-secrets",
    "href": "slides-data/api.html#bonnes-pratiques-pour-les-secrets",
    "title": "Masterclass API",
    "section": "Bonnes pratiques pour les secrets",
    "text": "Bonnes pratiques pour les secrets\n\nBoite de dialogue via getpass (application interactive uniquement)\nVariables dâ€™environnement:\n\nDans un fichier .env (non committÃ©!)\nDans les secrets de lâ€™intÃ©gration continue\n\n\nfrom dotenv import load_dotenv\nload_dotenv()\ntoken = os.getenv(\"MON_PETIT_JETON\")"
  },
  {
    "objectID": "slides-data/api.html#conclusion",
    "href": "slides-data/api.html#conclusion",
    "title": "Masterclass API",
    "section": "Conclusion",
    "text": "Conclusion\n\nPratique pour rÃ©cupÃ©rer des donnÃ©es ponctuelles:\n\nAfficher un nombre limitÃ© dâ€™enregistrements dans une application\nRÃ©cupÃ©rer des donnÃ©es issues dâ€™un processus de transformation complexe\n\nLimitÃ©es en termes de volumÃ©trie ou stabilitÃ© dâ€™accÃ¨s\nCode trÃ¨s adhÃ©rant Ã  une API et un langage client"
  }
]